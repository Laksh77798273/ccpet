# ccpet

[![npm version](https://badge.fury.io/js/ccpet.svg)](https://badge.fury.io/js/ccpet)
[![Downloads](https://img.shields.io/npm/dm/ccpet.svg)](https://www.npmjs.com/package/ccpet)
[![Node.js CI](https://github.com/terryso/ccpet/workflows/CI/badge.svg)](https://github.com/terryso/ccpet/actions)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[English](README.md)

ä¸€ä¸ª Claude Code çŠ¶æ€æ è™šæ‹Ÿå® ç‰©ã€‚å® ç‰©çš„èƒ½é‡ä¼šéšæ—¶é—´è¡°å‡ã€åœ¨ä½ æ¶ˆè€— token æ—¶å¢žåŠ ï¼Œå¹¶åœ¨ä¼šè¯ä¹‹é—´æŒä¹…åŒ–ä¿å­˜ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **èƒ½é‡æ¨¡åž‹** åŒ…å«è¡°å‡å’Œå–‚å…»æœºåˆ¶
  - åŸºäºŽæ—¶é—´çš„è¡°å‡ (çº¦æ¯åˆ†é’Ÿ 0.0231ï¼Œçº¦ 3 å¤©ä»Ž 100 â†’ 0)
  - é€šè¿‡ token ä½¿ç”¨è¿›è¡Œå–‚å…» (1,000,000 tokens = +1 èƒ½é‡)
- **åŠ¨ç”»è¡¨æƒ…** åŸºäºŽèƒ½é‡ç­‰çº§çš„è¿žç»­å¾ªçŽ¯åŠ¨ç”»
  - è¡¨æƒ…è‡ªåŠ¨å¾ªçŽ¯æ’­æ”¾4å¸§åŠ¨ç”»
  - æ— å¸§çŽ‡æ£€æµ‹ - ç®€å•çš„è®¡æ•°å™¨åŠ¨ç”»ç³»ç»Ÿ
- **è¡¨æƒ…çŠ¶æ€** åŸºäºŽé˜ˆå€¼åˆ’åˆ† (æ¥è‡ª `src/core/config.ts`)
  - `å¼€å¿ƒ (>=80)`: é™æ€ `(^_^)` â†’ åŠ¨ç”» `(^_^) (^o^) (^_^) (^v^)`
  - `é¥¥é¥¿ (>=40)`: é™æ€ `(o_o)` â†’ åŠ¨ç”» `(o_o) (O_O) (o_o) (-_-)`
  - `ç”Ÿç—… (>=10)`: é™æ€ `(u_u)` â†’ åŠ¨ç”» `(u_u) (T_T) (u_u) (>_<)`
  - `æ­»äº¡ (<10)`: é™æ€ `(x_x)` â†’ åŠ¨ç”» `(x_x) (X_X) (x_x) (+_+)`
- **ç®€å•åŠ¨ç”»ç³»ç»Ÿ**
  - åŸºäºŽè®¡æ•°å™¨çš„åŠ¨ç”»å¾ªçŽ¯ï¼ŒçŠ¶æ€æŒä¹…åŒ–
  - è°ƒç”¨è®¡æ•°è·Ÿè¸ªï¼Œæ€§èƒ½ä¼˜åŒ–
  - æ¯ä¸ªèƒ½é‡çŠ¶æ€è¿žç»­4å¸§åŠ¨ç”»å¾ªçŽ¯
- **çŠ¶æ€è¾“å‡º** (å½©è‰²): è¡¨æƒ… + èƒ½é‡æ¡ + èƒ½é‡å€¼ + ç´¯è®¡çš„ tokens
- **ä¼šè¯æŒ‡æ ‡** è¡Œ: è¾“å…¥ / è¾“å‡º / ç¼“å­˜ / æ€» tokens
- **æŒä¹…åŒ–çŠ¶æ€** è·¨ä¼šè¯ä¿å­˜

## å®‰è£…å’Œé…ç½®

è¦å°† ccpet ç”¨ä½œä½ çš„ Claude Code çŠ¶æ€æ ï¼Œè¯·åœ¨ä½ çš„ `~/.claude/settings.json` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "statusLine": {
    "type": "command",
    "command": "npx ccpet@latest",
    "padding": 0 
  }
}
```

é…ç½®å®ŒæˆåŽï¼Œä½ çš„ Claude Code çŠ¶æ€æ å°±ä¼šæ˜¾ç¤ºä¸€ä¸ªå¯çˆ±çš„è™šæ‹Ÿå® ç‰©ï¼Œå®ƒä¼šæ ¹æ®ä½ çš„ token ä½¿ç”¨æƒ…å†µå®žæ—¶æ›´æ–°çŠ¶æ€ã€‚

## è¾“å‡ºç¤ºä¾‹

### é™æ€æ¨¡å¼ (ä½Žé¢‘æ›´æ–°)

```text
(o_o) â—â—â—â—â—â—â—â—‹â—‹â—‹ 67.43 (125K) ðŸ’–2.1M
 In: 2847 Out: 1256 Cached: 512 Total: 4615
```

### åŠ¨ç”»æ¨¡å¼ (è¿žç»­å¾ªçŽ¯)

ä½ çš„å® ç‰©ä¼šåŸºäºŽèƒ½é‡ç­‰çº§è¿žç»­å¾ªçŽ¯æ˜¾ç¤ºåŠ¨ç”»è¡¨æƒ…ï¼š

```text
(^o^) â—â—â—â—â—â—â—â—â—â— 98.52 (45K) ðŸ’–5.2M    # å¸§ 1
(^_^) â—â—â—â—â—â—â—â—â—â— 98.52 (45K) ðŸ’–5.2M    # å¸§ 2  
(^v^) â—â—â—â—â—â—â—â—â—â— 98.52 (45K) ðŸ’–5.2M    # å¸§ 3
(^_^) â—â—â—â—â—â—â—â—â—â— 98.52 (45K) ðŸ’–5.2M    # å¸§ 4
```

**æ ¼å¼è¯´æ˜Žï¼š**

- ç¬¬ 1 è¡Œ: è¡¨æƒ… + 10 å­—ç¬¦èƒ½é‡æ¡ + èƒ½é‡å€¼ (2 ä½å°æ•°) + å¾…è½¬åŒ–çš„ tokenæ•° + å® ç‰©ç”Ÿå‘½æœŸæ€» token æ•°
- ç¬¬ 2 è¡Œ: ä¼šè¯æ€»è®¡ (è¾“å…¥/è¾“å‡º/ç¼“å­˜/æ€»è®¡)

## å® ç‰©ç…§é¡¾

å¦‚æžœä½ çš„å® ç‰©æ­»äº†ï¼ˆæ˜¾ç¤º `(x_x)` ä¸”èƒ½é‡ < 10ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡ç§¯æžä½¿ç”¨ Claude Code æ¥å¤æ´»å®ƒã€‚ä½ æ¶ˆè€—çš„æ¯ä¸ª token éƒ½ä¼šå¸®åŠ©æ¢å¤å® ç‰©çš„èƒ½é‡ã€‚ä½¿ç”¨ Claude Code è¶Šå¤šï¼Œå® ç‰©æ¢å¤å¾—è¶Šå¿«ï¼

**å½“å® ç‰©èƒ½é‡é™åˆ° 0 æ—¶**ï¼šä½ çš„å® ç‰©ä¼šå®Œå…¨æ­»äº¡ï¼Œæ‰€æœ‰ token ç»Ÿè®¡æ•°æ®ï¼ˆtotalLifetimeTokensã€totalTokensConsumedã€accumulatedTokensï¼‰éƒ½ä¼šé‡ç½®ä¸ºé›¶ã€‚è¦é‡æ–°å¼€å§‹ï¼Œåªéœ€ç»§ç»­ä½¿ç”¨ Claude Code - ä½ æ¶ˆè€—çš„æ¯ä¸ªæ–° token éƒ½ä¼šä»Žå¤´å¼€å§‹åŸ¹å…»ä½ çš„æ–°å® ç‰©ï¼

## æ‰‹åŠ¨æ£€æŸ¥å® ç‰©çŠ¶æ€

æƒ³åœ¨ä¸ä½¿ç”¨ Claude Code çš„æƒ…å†µä¸‹æŸ¥çœ‹å® ç‰©çŠ¶æ€å—ï¼Ÿä½¿ç”¨æ‰‹åŠ¨æ£€æŸ¥å‘½ä»¤ï¼š

```bash
npx ccpet-check
```

æ­¤å‘½ä»¤ç‰¹ç‚¹ï¼š
- âœ… æ˜¾ç¤ºåº”ç”¨å®žæ—¶è¡°å‡åŽçš„å® ç‰©å½“å‰çŠ¶æ€
- âœ… **ä¸æ¶ˆè€— Claude Code token**
- âœ… æ˜¾ç¤ºè·ç¦»ä¸Šæ¬¡å–‚é£Ÿçš„æ—¶é—´
- âœ… å®Œç¾Žé€‚ç”¨äºŽæ£€æŸ¥å® ç‰©æ˜¯å¦éœ€è¦å…³æ³¨

**ä¸ºä»€ä¹ˆçŠ¶æ€æ ä¸è‡ªåŠ¨æ›´æ–°ï¼Ÿ**
Claude Code çŠ¶æ€æ åªåœ¨ä½ ä¸»åŠ¨ä½¿ç”¨ Claude Code æ—¶æ›´æ–°ã€‚è¿™ç§è®¾è®¡æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦åœ°æ¶ˆè€—ä½ çš„ tokenã€‚æ‰‹åŠ¨æ£€æŸ¥å‘½ä»¤è®©ä½ å¯ä»¥éšæ—¶æŸ¥çœ‹å® ç‰©çŠ¶æ€è€Œä¸äº§ç”Ÿ token è´¹ç”¨ï¼

## è®¸å¯è¯

MIT License
